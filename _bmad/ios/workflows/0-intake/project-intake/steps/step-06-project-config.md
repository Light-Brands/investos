---
name: 'step-06-project-config'
description: 'Generate project-config YAML with source refs, workflow readiness flags, and recommended execution sequence'

# File References
outputFile: '{planning_artifacts}/source-digest-{project_name}.md'
configOutputFile: '{planning_artifacts}/project-config-{project_name}.yaml'
---

# Step 6: Project Config Generation

## STEP GOAL:

Generate the project configuration YAML file that powers downstream workflow orchestration. This config captures source references, workflow readiness flags, recommended execution sequence, and all context needed for the Full Raise Orchestration workflow to execute automatically.

## MANDATORY EXECUTION RULES (READ FIRST):

### Universal Rules:

- NEVER generate content without user input for subjective decisions
- CRITICAL: Read the complete step file before taking any action
- YOU ARE A FACILITATOR, not a content generator
- YOU MUST ALWAYS SPEAK OUTPUT in your Agent communication style with the config `{communication_language}`

### Step-Specific Rules:

- You MAY autonomously generate the config - this is structured output from analysis
- Present the config for user review before finalizing
- This is the FINAL step of the intake workflow
- FORBIDDEN to start any downstream workflows

## EXECUTION PROTOCOLS:

- Generate config based on all data collected in steps 1-5
- Include all workflow readiness assessments
- Calculate recommended execution sequence based on dependencies and readiness
- Save both the config file and update the digest frontmatter

## Sequence of Instructions (Do not deviate, skip, or optimize)

### 1. Load Current State

Read `{outputFile}` to get the complete intake state including gap analysis results.

### 2. Calculate Execution Sequence

Determine the recommended workflow execution order based on:

1. **Phase order**: Discovery → Legal → Financial → Materials → Execution
2. **Within-phase dependencies**: Some workflows depend on others' outputs
3. **Readiness status**: Ready workflows first, Partially Ready next, Blocked last
4. **Required first**: Required workflows before optional ones within each phase

Standard IOS dependency graph:
- RS (Raise Strategy) → enables IT, DS, TR, EP
- SF (Strategic Foundation) → enables IN, BG
- RS + SF → enables ES, RC
- ES + RC → enables ID
- RS + SF + MR → enables FM, VR
- FM → enables CT, VM, SM
- All Phase 1-3 → enables DR, IN, OB
- All Phase 1-4 → enables IR, QC, VX

### 3. Generate Project Config YAML

Create `{configOutputFile}` with this structure:

```yaml
# IOS Project Configuration
# Generated by Project Intake Workflow
# Date: {date}

project:
  name: "{project_name}"
  description: "{brief description}"
  raise_context:
    amount: "{raise amount or TBD}"
    stage: "{stage or TBD}"
    regulation_pathway: "{pathway or TBD}"
    engagement_tier: "{tier or TBD}"

source_digest: "{planning_artifacts}/source-digest-{project_name}.md"

workflow_readiness:
  # Phase 1 - Discovery
  create-raise-strategy:
    status: "{ready|partial|blocked}"
    required: true
    gaps: ["{list of gaps}"]
  create-strategic-foundation:
    status: "{ready|partial|blocked}"
    required: true
    gaps: []
  market-research-investment:
    status: "{status}"
    required: false
    gaps: []
  competitive-analysis:
    status: "{status}"
    required: false
    gaps: []
  investor-targeting:
    status: "{status}"
    required: false
    gaps: []
  deal-structure:
    status: "{status}"
    required: false
    gaps: []
  tier-routing:
    status: "{status}"
    required: false
    gaps: []
  create-engagement-plan:
    status: "{status}"
    required: false
    gaps: []

  # Phase 2 - Legal
  create-entity-structure:
    status: "{status}"
    required: true
    gaps: []
  regulatory-compliance-routing:
    status: "{status}"
    required: false
    gaps: []
  create-investment-docs:
    status: "{status}"
    required: true
    gaps: []

  # Phase 3 - Financial
  create-financial-model:
    status: "{status}"
    required: true
    gaps: []
  create-valuation-report:
    status: "{status}"
    required: true
    gaps: []
  model-cap-table:
    status: "{status}"
    required: false
    gaps: []
  validate-financial-model:
    status: "{status}"
    required: false
    gaps: []
  create-staffing-model:
    status: "{status}"
    required: false
    gaps: []

  # Phase 4 - Materials
  create-data-room:
    status: "{status}"
    required: true
    gaps: []
  create-investor-narrative:
    status: "{status}"
    required: true
    gaps: []
  create-operational-blueprint:
    status: "{status}"
    required: false
    gaps: []
  plan-investor-platform:
    status: "{status}"
    required: false
    gaps: []
  design-investor-platform:
    status: "{status}"
    required: false
    gaps: []
  create-brand-guidelines:
    status: "{status}"
    required: false
    gaps: []

  # Phase 5 - Execution
  engagement-status:
    status: "not-applicable"
    required: false
    gaps: []
  quality-check:
    status: "not-applicable"
    required: false
    gaps: []
  validate-cross-references:
    status: "not-applicable"
    required: false
    gaps: []
  investor-readiness:
    status: "not-applicable"
    required: true
    gaps: []

execution_sequence:
  - phase: "1-discovery"
    workflows:
      - name: "create-raise-strategy"
        command: "bmad-ios-create-raise-strategy"
        agent: "investment-strategist"
        status: "{status}"
      - name: "create-strategic-foundation"
        command: "bmad-ios-create-strategic-foundation"
        agent: "narrative-director"
        status: "{status}"
      # ... remaining workflows in dependency order
  - phase: "2-legal"
    workflows: []
  - phase: "3-financial"
    workflows: []
  - phase: "4-materials"
    workflows: []
  - phase: "5-execution"
    workflows: []

summary:
  total_workflows: 28
  ready: {count}
  partial: {count}
  blocked: {count}
  not_applicable: {count}
  required_ready: "{X} of {Y}"
  recommended_mode: "{auto|standard|manual}"
```

### 4. Update Digest Frontmatter

Update `{outputFile}` frontmatter:
- Set `status: complete`
- Set `stepsCompleted: [1, 2, 3, 4, 5, 6]`

### 5. Present Final Summary

"Project intake complete for {project_name}!

**Files Generated:**
- Source Digest: `{outputFile}`
- Project Config: `{configOutputFile}`

**Workflow Readiness:**
- **{ready_count}** workflows ready to execute
- **{partial_count}** partially ready (can start, may need supplements)
- **{blocked_count}** blocked (missing critical inputs)
- **{required_ready}** required workflows ready

**Recommended Orchestration Mode:** {Auto/Standard/Manual}
- Auto: Execute all ready workflows in sequence with minimal interaction
- Standard: Execute with checkpoints after each workflow for review
- Manual: Execute one workflow at a time with full interaction

**Next Step:** Select `[ORCH]` from the IOS Master menu to begin Full Raise Orchestration, or select any individual workflow to run it standalone."

### 6. Workflow Complete

This is the final step. The intake workflow is complete. Return control to the IOS Master Agent menu.

Display:

[MH] Return to IOS Master Menu
[ORCH] Start Full Raise Orchestration
[V] View project config
[D] View source digest

Wait for user input and route accordingly.
