---
name: 'step-06-project-config'
description: 'Generate project-config YAML with source refs, workflow readiness flags, and recommended execution sequence'

# File References
outputFile: '{planning_artifacts}/source-digest-{project_name}-aos.md'
configOutputFile: '{planning_artifacts}/project-config-{project_name}-aos.yaml'
---

# Step 6: Project Config Generation

## STEP GOAL:

Generate the project configuration YAML file that powers downstream workflow orchestration. This config captures source references, workflow readiness flags, recommended execution sequence, and all context needed for the Full Campaign Orchestration workflow to execute automatically.

## MANDATORY EXECUTION RULES (READ FIRST):

### Universal Rules:

- NEVER generate content without user input for subjective decisions
- CRITICAL: Read the complete step file before taking any action
- YOU ARE A FACILITATOR, not a content generator
- YOU MUST ALWAYS SPEAK OUTPUT in your Agent communication style with the config `{communication_language}`

### Step-Specific Rules:

- You MAY autonomously generate the config - this is structured output from analysis
- Present the config for user review before finalizing
- This is the FINAL step of the intake workflow
- FORBIDDEN to start any downstream workflows

## EXECUTION PROTOCOLS:

- Generate config based on all data collected in steps 1-5
- Include all workflow readiness assessments
- Calculate recommended execution sequence based on dependencies and readiness
- Save both the config file and update the digest frontmatter

## Sequence of Instructions (Do not deviate, skip, or optimize)

### 1. Load Current State

Read `{outputFile}` to get the complete intake state including gap analysis results.

### 2. Calculate Execution Sequence

Determine the recommended workflow execution order based on:

1. **Phase order**: Strategy Foundation -> Content Production -> Review & Compliance -> Distribution & Campaign -> Crisis & Ongoing
2. **Within-phase dependencies**: Some workflows depend on others' outputs
3. **Readiness status**: Ready workflows first, Partially Ready next, Blocked last
4. **Required first**: Required workflows before optional ones within each phase

Standard AOS dependency graph:
- BV (Brand Voice Setup) + CF (Compliance Framework) -> enables all Phase 2 content production
- IS (Investor Segmentation) -> enables targeted content (EC, LP, SC, CC, RD)
- BV + CF + IS -> enables OC, ID
- All Phase 2 content -> enables Phase 3 reviews (CR, OR, FG, DR)
- Phase 3 approved content -> enables Phase 4 campaigns (CC, CP, RD)
- Phase 4 campaigns -> enables Phase 5 monitoring (RT)

### 3. Generate Project Config YAML

Create `{configOutputFile}` with this structure:

```yaml
# AOS Project Configuration
# Generated by Project Intake Workflow
# Date: {date}

project:
  name: "{project_name}"
  description: "{brief description}"
  communications_context:
    campaign_type: "{campaign type or TBD}"
    raise_amount: "{raise amount or TBD}"
    regulation_pathway: "{Reg A+ / Reg D / Reg CF / General IR / TBD}"
    target_audience: "{target investor audience or TBD}"

source_digest: "{planning_artifacts}/source-digest-{project_name}-aos.md"

workflow_readiness:
  # Phase 1 - Strategy Foundation
  brand-voice-setup:
    status: "{ready|partial|blocked}"
    required: true
    gaps: ["{list of gaps}"]
  compliance-framework:
    status: "{ready|partial|blocked}"
    required: true
    gaps: []
  investor-segmentation:
    status: "{status}"
    required: false
    gaps: []
  market-intelligence:
    status: "{status}"
    required: false
    gaps: []

  # Phase 2 - Content Production
  create-offering-circular:
    status: "{status}"
    required: true
    gaps: []
  create-investor-deck:
    status: "{status}"
    required: true
    gaps: []
  create-email-campaign:
    status: "{status}"
    required: false
    gaps: []
  create-video-scripts:
    status: "{status}"
    required: false
    gaps: []
  create-landing-pages:
    status: "{status}"
    required: false
    gaps: []
  create-social-content:
    status: "{status}"
    required: false
    gaps: []
  financial-content-package:
    status: "{status}"
    required: false
    gaps: []

  # Phase 3 - Review & Compliance
  content-compliance-review:
    status: "{status}"
    required: false
    gaps: []
  offering-document-review:
    status: "{status}"
    required: false
    gaps: []
  final-gate-review:
    status: "{status}"
    required: false
    gaps: []
  disclosure-review:
    status: "{status}"
    required: false
    gaps: []

  # Phase 4 - Distribution & Campaign
  create-campaign:
    status: "{status}"
    required: true
    gaps: []
  campaign-planning:
    status: "{status}"
    required: false
    gaps: []
  campaign-status:
    status: "not-applicable"
    required: false
    gaps: []
  create-roadshow:
    status: "{status}"
    required: false
    gaps: []

  # Phase 5 - Crisis & Ongoing
  crisis-response:
    status: "not-applicable"
    required: false
    gaps: []
  sec-comment-response:
    status: "not-applicable"
    required: false
    gaps: []
  campaign-retrospective:
    status: "not-applicable"
    required: false
    gaps: []

execution_sequence:
  - phase: "1-strategy-foundation"
    workflows:
      - name: "brand-voice-setup"
        command: "bmad-aos-brand-voice-setup"
        agent: "aos-brand"
        status: "{status}"
      - name: "compliance-framework"
        command: "bmad-aos-compliance-framework"
        agent: "aos-compliance"
        status: "{status}"
      - name: "investor-segmentation"
        command: "bmad-aos-investor-segmentation"
        agent: "aos-ir"
        status: "{status}"
      - name: "market-intelligence"
        command: "bmad-aos-market-intelligence"
        agent: "aos-intel"
        status: "{status}"
  - phase: "2-content-production"
    workflows:
      - name: "create-offering-circular"
        command: "bmad-aos-create-offering-circular"
        agent: "aos-content"
        status: "{status}"
      - name: "create-investor-deck"
        command: "bmad-aos-create-investor-deck"
        agent: "aos-content"
        status: "{status}"
      - name: "create-email-campaign"
        command: "bmad-aos-create-email-campaign"
        agent: "aos-content"
        status: "{status}"
      - name: "create-video-scripts"
        command: "bmad-aos-create-video-scripts"
        agent: "aos-content"
        status: "{status}"
      - name: "create-landing-pages"
        command: "bmad-aos-create-landing-pages"
        agent: "aos-content"
        status: "{status}"
      - name: "create-social-content"
        command: "bmad-aos-create-social-content"
        agent: "aos-content"
        status: "{status}"
      - name: "financial-content-package"
        command: "bmad-aos-financial-content-package"
        agent: "aos-fincomm"
        status: "{status}"
  - phase: "3-review-compliance"
    workflows:
      - name: "content-compliance-review"
        command: "bmad-aos-content-compliance-review"
        agent: "aos-reviewer"
        status: "{status}"
      - name: "offering-document-review"
        command: "bmad-aos-offering-document-review"
        agent: "aos-reviewer"
        status: "{status}"
      - name: "final-gate-review"
        command: "bmad-aos-final-gate-review"
        agent: "aos-reviewer"
        status: "{status}"
      - name: "disclosure-review"
        command: "bmad-aos-disclosure-review"
        agent: "aos-reviewer"
        status: "{status}"
  - phase: "4-distribution-campaign"
    workflows:
      - name: "create-campaign"
        command: "bmad-aos-create-campaign"
        agent: "aos-orchestrator"
        status: "{status}"
      - name: "campaign-planning"
        command: "bmad-aos-campaign-planning"
        agent: "aos-orchestrator"
        status: "{status}"
      - name: "campaign-status"
        command: "bmad-aos-campaign-status"
        agent: "aos-orchestrator"
        status: "{status}"
      - name: "create-roadshow"
        command: "bmad-aos-create-roadshow"
        agent: "aos-ir"
        status: "{status}"
  - phase: "5-crisis-ongoing"
    workflows:
      - name: "crisis-response"
        command: "bmad-aos-crisis-response"
        agent: "aos-crisis"
        status: "{status}"
      - name: "sec-comment-response"
        command: "bmad-aos-sec-comment-response"
        agent: "aos-crisis"
        status: "{status}"
      - name: "campaign-retrospective"
        command: "bmad-aos-campaign-retrospective"
        agent: "aos-orchestrator"
        status: "{status}"

summary:
  total_workflows: 22
  ready: {count}
  partial: {count}
  blocked: {count}
  not_applicable: {count}
  required_ready: "{X} of {Y}"
  recommended_mode: "{auto|standard|manual}"
```

### 4. Update Digest Frontmatter

Update `{outputFile}` frontmatter:
- Set `status: complete`
- Set `stepsCompleted: [1, 2, 3, 4, 5, 6]`

### 5. Present Final Summary

"Project intake complete for {project_name}!

**Files Generated:**
- Source Digest: `{outputFile}`
- Project Config: `{configOutputFile}`

**Workflow Readiness:**
- **{ready_count}** workflows ready to execute
- **{partial_count}** partially ready (can start, may need supplements)
- **{blocked_count}** blocked (missing critical inputs)
- **{required_ready}** required workflows ready

**Recommended Orchestration Mode:** {Auto/Standard/Manual}
- Auto: Execute all ready workflows in sequence with minimal interaction
- Standard: Execute with checkpoints after each workflow for review
- Manual: Execute one workflow at a time with full interaction

**Next Step:** Select `[ORCH]` from the AOS Master menu to begin Full Campaign Orchestration, or select any individual workflow to run it standalone."

### 6. Workflow Complete

This is the final step. The intake workflow is complete. Return control to the AOS Master Agent menu.

Display:

[MH] Return to AOS Master Menu
[ORCH] Start Full Campaign Orchestration
[V] View project config
[D] View source digest

Wait for user input and route accordingly.
